"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[835],{7835:function(e,s,t){t.r(s),t.d(s,{default:function(){return i}});var l=t(5893),a=t(7294),r=t(4485);function i(){let[e,s]=(0,a.useState)([]),[t,i]=(0,a.useState)(null),[n,d]=(0,a.useState)(""),[c,o]=(0,a.useState)(""),u=(0,a.useRef)(null),{t:m}=(0,r.$)(),[g,x]=(0,a.useState)(""),[h,p]=(0,a.useState)("http-request"),[b,f]=(0,a.useState)(""),[j,v]=(0,a.useState)(""),[y,N]=(0,a.useState)("insert"),[k,w]=(0,a.useState)(""),[C,S]=(0,a.useState)(!1),[P,D]=(0,a.useState)(""),[q,E]=(0,a.useState)(""),F=(0,a.useCallback)(e=>{e.preventDefault();let s=e.dataTransfer.files[0];s&&i(s)},[]),T=(0,a.useCallback)(e=>{var s;let t=null===(s=e.target.files)||void 0===s?void 0:s[0];t&&i(t)},[]),_=(0,a.useCallback)(()=>{let e={name:g,type:h,pattern:"http-request"===h?b:k,mitmDomain:"http-request"===h?j:void 0,mitmMode:"http-request"===h?y:void 0,timeout:"cron"===h?P:void 0,scriptPath:q};s(s=>[...s,e]),x(""),f(""),v(""),N("insert"),w(""),S(!1),D(""),E("")},[g,h,b,j,y,k,C,P,q]),M=(0,a.useCallback)(e=>{s(s=>s.filter((s,t)=>t!==e))},[]),R=(0,a.useCallback)(()=>{try{alert("保存成功！")}catch(e){alert(m("saveFailed"))}},[e,n,c,m]);return(0,a.useCallback)(()=>{var e;null===(e=u.current)||void 0===e||e.click()},[]),(0,a.useEffect)(()=>{let e=()=>{R()};return window.addEventListener("save-config",e),()=>{window.removeEventListener("save-config",e)}},[R]),(0,l.jsxs)("div",{className:"min-h-[calc(100vh-4rem)] bg-gray-50/70 pt-20",children:[(0,l.jsx)("input",{type:"file",ref:u,onChange:T,className:"hidden"}),(0,l.jsx)("div",{onDrop:F,onDragOver:e=>e.preventDefault(),className:"min-h-full",children:(0,l.jsx)("div",{className:"container mx-auto p-8",children:(0,l.jsxs)("div",{className:"grid grid-cols-12 gap-8",children:[(0,l.jsx)("div",{className:"col-span-7",children:(0,l.jsxs)("div",{className:"bg-white/70 backdrop-blur-sm shadow-lg rounded-lg p-8 sticky top-24",children:[(0,l.jsxs)("h2",{className:"text-2xl font-semibold mb-8 flex items-center gap-2 text-gray-800",children:[(0,l.jsx)("i",{className:"ti ti-plus-circle"})," ",m("addScriptSection")]}),(0,l.jsxs)("div",{className:"space-y-8",children:[(0,l.jsxs)("div",{children:[(0,l.jsx)("label",{className:"block text-lg font-medium text-gray-700 mb-3",children:m("scriptName")}),(0,l.jsx)("input",{type:"text",value:g,onChange:e=>x(e.target.value),placeholder:m("scriptNamePlaceholder"),className:"w-full px-4 py-3 text-lg rounded-lg border border-gray-300 focus:ring-2 focus:ring-indigo-500 focus:border-indigo-500"})]}),(0,l.jsxs)("div",{children:[(0,l.jsx)("label",{className:"block text-lg font-medium text-gray-700 mb-3",children:m("type")}),(0,l.jsxs)("select",{value:h,onChange:e=>p(e.target.value),className:"w-full px-4 py-3 text-lg rounded-lg border border-gray-300 focus:ring-2 focus:ring-indigo-500 focus:border-indigo-500",children:[(0,l.jsx)("option",{value:"http-request",children:"HTTP Request"}),(0,l.jsx)("option",{value:"http-response",children:"HTTP Response"}),(0,l.jsx)("option",{value:"cron",children:"Cron"})]})]}),h.includes("http")&&(0,l.jsxs)(l.Fragment,{children:[(0,l.jsxs)("div",{children:[(0,l.jsx)("label",{className:"block text-lg font-medium text-gray-700 mb-3",children:m("httpPattern")}),(0,l.jsx)("input",{type:"text",value:b,onChange:e=>f(e.target.value),placeholder:m("httpPatternPlaceholder"),className:"w-full px-4 py-3 text-lg rounded-lg border border-gray-300 focus:ring-2 focus:ring-indigo-500 focus:border-indigo-500"})]}),(0,l.jsxs)("div",{children:[(0,l.jsx)("label",{className:"block text-lg font-medium text-gray-700 mb-3",children:m("mitmDomain")}),(0,l.jsx)("input",{type:"text",value:j,onChange:e=>v(e.target.value),placeholder:m("mitmDomainPlaceholder"),className:"w-full px-4 py-3 text-lg rounded-lg border border-gray-300 focus:ring-2 focus:ring-indigo-500 focus:border-indigo-500"})]}),(0,l.jsxs)("div",{children:[(0,l.jsx)("label",{className:"block text-lg font-medium text-gray-700 mb-3",children:m("mitmMode")}),(0,l.jsxs)("select",{value:y,onChange:e=>N(e.target.value),className:"w-full px-4 py-3 text-lg rounded-lg border border-gray-300 focus:ring-2 focus:ring-indigo-500 focus:border-indigo-500",children:[(0,l.jsx)("option",{value:"insert",children:m("mitmInsert")}),(0,l.jsx)("option",{value:"append",children:m("mitmAppend")})]})]})]}),"cron"===h&&(0,l.jsxs)(l.Fragment,{children:[(0,l.jsxs)("div",{children:[(0,l.jsx)("label",{className:"block text-lg font-medium text-gray-700 mb-3",children:m("cronPattern")}),(0,l.jsx)("input",{type:"text",value:k,onChange:e=>w(e.target.value),placeholder:m("cronPatternPlaceholder"),className:"w-full px-4 py-3 text-lg rounded-lg border border-gray-300 focus:ring-2 focus:ring-indigo-500 focus:border-indigo-500"})]}),(0,l.jsxs)("div",{className:"space-y-6",children:[(0,l.jsxs)("div",{className:"flex items-center",children:[(0,l.jsx)("input",{type:"checkbox",checked:C,onChange:e=>S(e.target.checked),className:"w-5 h-5 rounded border-gray-300 text-indigo-600 focus:ring-indigo-500"}),(0,l.jsx)("label",{className:"ml-3 text-lg text-gray-700",children:m("wakeSystem")})]}),(0,l.jsxs)("div",{children:[(0,l.jsx)("label",{className:"block text-lg font-medium text-gray-700 mb-3",children:m("timeout")}),(0,l.jsx)("input",{type:"number",value:P,onChange:e=>D(e.target.value),className:"w-48 px-4 py-3 text-lg rounded-lg border border-gray-300 focus:ring-2 focus:ring-indigo-500 focus:border-indigo-500"})]})]})]}),(0,l.jsxs)("div",{children:[(0,l.jsx)("label",{className:"block text-lg font-medium text-gray-700 mb-3",children:m("scriptPath")}),(0,l.jsx)("input",{type:"text",value:q,onChange:e=>E(e.target.value),placeholder:m("scriptPathPlaceholder"),className:"w-full px-4 py-3 text-lg rounded-lg border border-gray-300 focus:ring-2 focus:ring-indigo-500 focus:border-indigo-500"})]})]}),(0,l.jsx)("div",{className:"mt-8",children:(0,l.jsxs)("button",{onClick:_,className:"w-full bg-green-500 hover:bg-green-600 text-white px-6 py-4 rounded-lg transition-all text-xl font-semibold flex items-center justify-center gap-2",children:[(0,l.jsx)("i",{className:"ti ti-plus"})," ",m("addScript")]})})]})}),(0,l.jsx)("div",{className:"col-span-5",children:(0,l.jsxs)("div",{className:"grid grid-rows-2 gap-8 h-[calc(100vh-8rem)] sticky top-24",children:[(0,l.jsxs)("div",{className:"bg-white/70 backdrop-blur-sm shadow-lg rounded-lg p-6 overflow-auto",children:[(0,l.jsxs)("h2",{className:"text-xl font-semibold mb-6 flex items-center gap-2 text-gray-800 sticky top-0 bg-white/70 backdrop-blur-sm py-2",children:[(0,l.jsx)("i",{className:"ti ti-list"})," ",m("existingScriptsSection")]}),(0,l.jsx)("div",{className:"space-y-4",children:e.length>0?e.map((e,s)=>(0,l.jsxs)("div",{className:"bg-gray-50 rounded-lg p-4 hover:shadow-lg transition-shadow",children:[(0,l.jsx)("h3",{className:"text-lg font-semibold mb-2",children:e.name}),(0,l.jsxs)("div",{className:"grid gap-2 text-sm text-gray-600",children:[(0,l.jsxs)("p",{children:[(0,l.jsxs)("span",{className:"font-medium",children:[m("type"),":"]})," ",e.type]}),"http-request"===e.type?(0,l.jsxs)(l.Fragment,{children:[(0,l.jsxs)("p",{children:[(0,l.jsxs)("span",{className:"font-medium",children:[m("httpPattern"),":"]})," ",e.pattern]}),(0,l.jsxs)("p",{children:[(0,l.jsxs)("span",{className:"font-medium",children:[m("mitmDomain"),":"]})," ",e.mitmDomain]})]}):(0,l.jsxs)(l.Fragment,{children:[(0,l.jsxs)("p",{children:[(0,l.jsxs)("span",{className:"font-medium",children:[m("cronPattern"),":"]})," ",e.pattern]}),(0,l.jsxs)("p",{children:[(0,l.jsxs)("span",{className:"font-medium",children:[m("timeout"),":"]})," ",e.timeout,"ms"]})]})]}),(0,l.jsxs)("div",{className:"mt-4 flex gap-2",children:[(0,l.jsxs)("button",{onClick(){},className:"flex-1 bg-blue-500 hover:bg-blue-600 text-white px-3 py-1.5 rounded-lg transition-all text-sm",children:[(0,l.jsx)("i",{className:"ti ti-edit"})," ",m("edit")]}),(0,l.jsxs)("button",{onClick:()=>M(s),className:"flex-1 bg-red-500 hover:bg-red-600 text-white px-3 py-1.5 rounded-lg transition-all text-sm",children:[(0,l.jsx)("i",{className:"ti ti-trash"})," ",m("delete")]})]})]},s)):(0,l.jsx)("div",{className:"text-center text-gray-500 py-8",children:m("noScriptsMessage")})})]}),(0,l.jsxs)("div",{className:"bg-white/70 backdrop-blur-sm shadow-lg rounded-lg p-6",children:[(0,l.jsxs)("h2",{className:"text-xl font-semibold mb-4 flex items-center gap-2 text-gray-800",children:[(0,l.jsx)("i",{className:"ti ti-edit"})," ",m("editDetailsSection")]}),(0,l.jsxs)("div",{className:"space-y-4",children:[(0,l.jsxs)("div",{children:[(0,l.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:m("moduleName")}),(0,l.jsx)("input",{type:"text",value:n,onChange:e=>d(e.target.value),className:"w-full px-3 py-2 rounded-lg border border-gray-300 focus:ring-2 focus:ring-indigo-500 focus:border-indigo-500"})]}),(0,l.jsxs)("div",{children:[(0,l.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:m("moduleDesc")}),(0,l.jsx)("textarea",{value:c,onChange:e=>o(e.target.value),rows:2,className:"w-full px-3 py-2 rounded-lg border border-gray-300 focus:ring-2 focus:ring-indigo-500 focus:border-indigo-500"})]})]})]})]})})]})})})]})}}}]);