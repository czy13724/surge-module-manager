(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[405],{8312:function(e,t,s){(window.__NEXT_P=window.__NEXT_P||[]).push(["/",function(){return s(5445)}])},4485:function(e,t,s){"use strict";s.d(t,{$:function(){return a}});var i=s(7294);let l={zh:{title:"Surge Module Manager",localMode:"本地模式",remoteMode:"远程模式",login:"GitHub 登录",logout:"登出",addScriptSection:"预添加脚本区",scriptName:"脚本名称",scriptNamePlaceholder:"给你的脚本起个名字",type:"类型",httpRequest:"HTTP 请求",httpResponse:"HTTP 响应",cron:"定时任务",httpPattern:"正则表达式",httpPatternPlaceholder:"例如: https://example.com/api.*",mitmDomain:"MITM 域名",mitmDomainPlaceholder:"例如: api.example.com",mitmMode:"MITM 模式",mitmInsert:"插入 (%INSERT%)",mitmAppend:"追加 (%APPEND%)",cronPattern:"Cron 表达式",cronPatternPlaceholder:"例如: 0 8 * * * (每天早上8点)",wakeSystem:"唤醒系统",timeout:"超时设置",scriptPath:"脚本路径",scriptPathPlaceholder:"远程URL或本地路径",addScript:"添加脚本",existingScriptsSection:"已存在脚本区",edit:"编辑",delete:"删除",importSection:"导入模块",importModule:"导入模块",dropFileHint:"拖放模块文件到此处或点击选择",selectFile:"选择文件",editDetailsSection:"编辑模块详情",moduleName:"模块名称",moduleDesc:"模块描述",saveConfig:"保存配置",saveSuccess:"保存成功！",saveFailed:"保存失败，请重试！",loginRequired:"请先登录以使用远程功能",loginPrompt:"远程模式需要登录才能使用完整功能。是否要登录？",loginFirst:"请先登录！",noScriptsMessage:"您暂未添加脚本，请在预添加脚本区增加脚本。"},en:{title:"Surge Module Manager",localMode:"Local Mode",remoteMode:"Remote Mode",login:"GitHub Login",logout:"Logout",addScriptSection:"Add Script",scriptName:"Script Name",scriptNamePlaceholder:"Enter your script name",type:"Type",httpRequest:"HTTP Request",httpResponse:"HTTP Response",cron:"Cron Task",httpPattern:"Regular Expression",httpPatternPlaceholder:"e.g., https://example.com/api.*",mitmDomain:"MITM Domain",mitmDomainPlaceholder:"e.g., api.example.com",mitmMode:"MITM Mode",mitmInsert:"Insert (%INSERT%)",mitmAppend:"Append (%APPEND%)",cronPattern:"Cron Expression",cronPatternPlaceholder:"e.g., 0 8 * * * (8:00 AM daily)",wakeSystem:"Wake System",timeout:"Timeout",scriptPath:"Script Path",scriptPathPlaceholder:"Remote URL or local path",addScript:"Add Script",existingScriptsSection:"Existing Scripts",edit:"Edit",delete:"Delete",importSection:"Import Module",importModule:"Import Module",dropFileHint:"Drop module file here or click to select",selectFile:"Select File",editDetailsSection:"Edit Module Details",moduleName:"Module Name",moduleDesc:"Module Description",saveConfig:"Save Configuration",saveSuccess:"Save successful!",saveFailed:"Save failed, please try again!",loginRequired:"Please login to use remote features",loginPrompt:"Remote mode requires login for full functionality. Would you like to login?",loginFirst:"Please login first!",noScriptsMessage:"No scripts added yet. Please add scripts in the Add Script section."}};function a(){let[e,t]=(0,i.useState)("zh");(0,i.useEffect)(()=>{let e=localStorage.getItem("language");e&&t(e)},[]);let s=()=>{let s="zh"===e?"en":"zh";t(s),localStorage.setItem("language",s)},a=t=>l[e][t];return{t:a,language:e,toggleLanguage:s}}},5445:function(e,t,s){"use strict";s.r(t),s.d(t,{default:function(){return g}});var i=s(5893),l=s(1857),a=s.n(l),d=s(3299),n=s(7294),o=s(9008),r=s.n(o),c=s(7066);function m(e){let{gistId:t,initialContent:s="",onSave:l}=e,{data:a}=(0,d.useSession)(),[o,r]=(0,n.useState)(s),[m,x]=(0,n.useState)(!1),f=async()=>{if(!(null==a?void 0:a.accessToken)){alert("请先登录！");return}x(!0);try{t?await c.Z.patch("/api/gists/".concat(t),{content:o}):await c.Z.post("/api/gists",{content:o}),l()}catch(e){console.error("保存失败:",e),alert("保存失败，请重试！")}finally{x(!1)}};return(0,i.jsxs)("div",{className:"space-y-4",children:[(0,i.jsx)("textarea",{value:o,onChange:e=>r(e.target.value),className:"w-full h-96 p-4 font-mono text-sm border rounded-lg focus:ring-2 focus:ring-indigo-500 focus:border-indigo-500",placeholder:"在此输入你的 Surge 模块内容..."}),(0,i.jsx)("div",{className:"flex justify-end",children:(0,i.jsx)("button",{onClick:f,disabled:m,className:"px-4 py-2 rounded-md text-white ".concat(m?"bg-gray-400 cursor-not-allowed":"bg-indigo-500 hover:bg-indigo-600"),children:m?"保存中...":"保存"})})]})}var x=s(5152),f=s.n(x),u=s(4485);let p=f()(()=>s.e(835).then(s.bind(s,7835)),{loadableGenerated:{webpack:()=>[7835]},ssr:!1});function g(){var e,t;let{data:s}=(0,d.useSession)(),[l,o]=(0,n.useState)("local"),[c,x]=(0,n.useState)(null),[f,g]=(0,n.useState)(!1),{t:h,language:b,toggleLanguage:j}=(0,u.$)(),N=()=>{if(!s&&"remote"===l){alert(h("loginRequired"));return}x(null),g(!0)},v=()=>{g(!1),x(null)},y=e=>{if("remote"===e&&!s){let t=window.confirm(h("loginPrompt"));if(t){(0,d.signIn)("github");return}}o(e)};return(0,i.jsxs)(i.Fragment,{children:[(0,i.jsxs)(r(),{children:[(0,i.jsx)("title",{className:"jsx-fd9583bf960d0724",children:h("title")}),(0,i.jsx)("meta",{name:"description",content:"Manage your Surge modules",className:"jsx-fd9583bf960d0724"}),(0,i.jsx)("link",{rel:"icon",href:"/favicon.ico",className:"jsx-fd9583bf960d0724"}),(0,i.jsx)("link",{rel:"stylesheet",href:"https://cdn.jsdelivr.net/npm/@tabler/icons-webfont@2.40.0/tabler-icons.min.css",className:"jsx-fd9583bf960d0724"})]}),(0,i.jsxs)("div",{className:"jsx-fd9583bf960d0724 min-h-screen",children:[(0,i.jsx)("nav",{className:"jsx-fd9583bf960d0724 bg-white/90 backdrop-blur-sm shadow fixed top-0 w-full z-50",children:(0,i.jsx)("div",{className:"jsx-fd9583bf960d0724 max-w-7xl mx-auto px-4 sm:px-6 lg:px-8",children:(0,i.jsxs)("div",{className:"jsx-fd9583bf960d0724 flex justify-between h-16",children:[(0,i.jsx)("div",{className:"jsx-fd9583bf960d0724 flex-shrink-0 flex items-center",children:(0,i.jsxs)("h1",{className:"jsx-fd9583bf960d0724 text-xl font-bold flex items-center gap-2",children:[(0,i.jsx)("i",{className:"jsx-fd9583bf960d0724 ti ti-box"}),h("title")]})}),(0,i.jsxs)("div",{className:"jsx-fd9583bf960d0724 flex items-center gap-4",children:["local"===l&&(0,i.jsxs)(i.Fragment,{children:[(0,i.jsxs)("button",{onClick(){let e=document.querySelector('input[type="file"]');e&&e.click()},className:"jsx-fd9583bf960d0724 px-4 py-2 rounded-md bg-indigo-500 hover:bg-indigo-600 text-white transition-all flex items-center gap-2",children:[(0,i.jsx)("i",{className:"jsx-fd9583bf960d0724 ti ti-upload"})," ",h("importModule")]}),(0,i.jsxs)("button",{onClick(){let e=new CustomEvent("save-config");window.dispatchEvent(e)},className:"jsx-fd9583bf960d0724 px-4 py-2 rounded-md bg-green-500 hover:bg-green-600 text-white transition-all flex items-center gap-2",children:[(0,i.jsx)("i",{className:"jsx-fd9583bf960d0724 ti ti-device-floppy"})," ",h("saveConfig")]})]}),(0,i.jsxs)("button",{onClick:j,className:"jsx-fd9583bf960d0724 px-4 py-2 rounded-md bg-gray-900 hover:bg-gray-800 text-white transition-all flex items-center gap-2",children:[(0,i.jsx)("i",{className:"jsx-fd9583bf960d0724 ti ti-language"})," ","zh"===b?"EN":"中文"]}),(0,i.jsxs)("div",{className:"jsx-fd9583bf960d0724 grid grid-cols-2 p-0.5 rounded-lg bg-gray-700 relative w-56",children:[(0,i.jsx)("div",{className:"jsx-fd9583bf960d0724 "+"absolute top-0.5 bottom-0.5 w-[50%] bg-blue-500 rounded-md transition-transform duration-300 ease-in-out ".concat("remote"===l?"translate-x-full":"")}),(0,i.jsxs)("button",{onClick:()=>y("local"),className:"jsx-fd9583bf960d0724 relative z-10 px-3 py-1.5 rounded-md flex items-center justify-center gap-1.5 text-white text-sm",children:[(0,i.jsx)("i",{className:"jsx-fd9583bf960d0724 ti ti-device-laptop"})," ",h("localMode")]}),(0,i.jsxs)("button",{onClick:()=>y("remote"),className:"jsx-fd9583bf960d0724 relative z-10 px-3 py-1.5 rounded-md flex items-center justify-center gap-1.5 text-white text-sm",children:[(0,i.jsx)("i",{className:"jsx-fd9583bf960d0724 ti ti-cloud"})," ",h("remoteMode")]})]}),"remote"===l&&(s?(0,i.jsxs)(i.Fragment,{children:[(0,i.jsxs)("span",{className:"jsx-fd9583bf960d0724 text-sm text-gray-600",children:[(0,i.jsx)("i",{className:"jsx-fd9583bf960d0724 ti ti-user"})," ",null===(e=s.user)||void 0===e?void 0:e.name]}),(0,i.jsxs)("button",{onClick:()=>(0,d.signOut)(),className:"jsx-fd9583bf960d0724 bg-red-500 hover:bg-red-600 text-white px-4 py-2 rounded-md transition-all",children:[(0,i.jsx)("i",{className:"jsx-fd9583bf960d0724 ti ti-logout"})," ",h("logout")]})]}):(0,i.jsxs)("button",{onClick:()=>(0,d.signIn)("github"),className:"jsx-fd9583bf960d0724 bg-indigo-500 hover:bg-indigo-600 text-white px-4 py-2 rounded-md transition-all",children:[(0,i.jsx)("i",{className:"jsx-fd9583bf960d0724 ti ti-brand-github"})," ",h("login")]}))]})]})})}),(0,i.jsx)("main",{className:"jsx-fd9583bf960d0724 max-w-7xl mx-auto py-6 sm:px-6 lg:px-8 mt-16",children:"local"===l?(0,i.jsx)(p,{}):(0,i.jsx)("div",{className:"jsx-fd9583bf960d0724 bg-white/90 backdrop-blur-sm shadow rounded-lg p-6",children:f?(0,i.jsx)(m,{gistId:null==c?void 0:c.id,initialContent:null===(t=null==c?void 0:c.files[Object.keys(c.files)[0]])||void 0===t?void 0:t.content,onSave:v}):(0,i.jsx)("div",{className:"jsx-fd9583bf960d0724 space-y-4",children:s?(0,i.jsx)(i.Fragment,{children:(0,i.jsxs)("button",{onClick:N,className:"jsx-fd9583bf960d0724 bg-indigo-500 hover:bg-indigo-600 text-white px-4 py-2 rounded-md transition-all",children:[(0,i.jsx)("i",{className:"jsx-fd9583bf960d0724 ti ti-plus"})," ",h("addScript")]})}):(0,i.jsxs)("div",{className:"jsx-fd9583bf960d0724 text-center py-8",children:[(0,i.jsx)("i",{className:"jsx-fd9583bf960d0724 ti ti-lock text-4xl text-gray-400"}),(0,i.jsx)("p",{className:"jsx-fd9583bf960d0724 mt-2 text-gray-600",children:h("loginRequired")}),(0,i.jsxs)("button",{onClick:()=>(0,d.signIn)("github"),className:"jsx-fd9583bf960d0724 mt-4 bg-indigo-500 hover:bg-indigo-600 text-white px-6 py-2 rounded-md transition-all",children:[(0,i.jsx)("i",{className:"jsx-fd9583bf960d0724 ti ti-brand-github"})," ",h("login")]})]})})})}),(0,i.jsx)("footer",{className:"jsx-fd9583bf960d0724 fixed bottom-0 left-0 w-full bg-black/50 backdrop-blur-sm text-white text-center py-4",children:(0,i.jsxs)("div",{className:"jsx-fd9583bf960d0724 space-y-1",children:[(0,i.jsxs)("div",{className:"jsx-fd9583bf960d0724",children:["Powered by ",(0,i.jsx)("a",{href:"https://github.com/czy13724",target:"_blank",rel:"noopener noreferrer",className:"jsx-fd9583bf960d0724 text-indigo-400 hover:text-indigo-300",children:"Levi"})]}),(0,i.jsxs)("div",{className:"jsx-fd9583bf960d0724 text-sm text-gray-400",children:["Copyright \xa9 ",new Date().getFullYear()," Levi. All rights reserved."]})]})})]}),(0,i.jsx)(a(),{id:"fd9583bf960d0724",children:'body{background:url("https://cdn.jsdelivr.net/gh/czy13724/czy13724.github.io@master/img/bg/image_16.jpg")center/cover fixed no-repeat}'})]})}}},function(e){e.O(0,[497,774,888,179],function(){return e(e.s=8312)}),_N_E=e.O()}]);